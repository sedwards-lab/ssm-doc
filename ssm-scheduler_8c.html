<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ssm: /mnt/sedwards/group/projects/bdl/ssm/src/ssm-scheduler.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ssm
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ssm-scheduler.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="ssm_8h_source.html">ssm.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ssm-scheduler.c:</div>
<div class="dyncontent">
<div class="center"><img src="ssm-scheduler_8c__incl.png" border="0" usemap="#_2mnt_2sedwards_2group_2projects_2bdl_2ssm_2src_2ssm-scheduler_8c" alt=""/></div>
<map name="_2mnt_2sedwards_2group_2projects_2bdl_2ssm_2src_2ssm-scheduler_8c" id="_2mnt_2sedwards_2group_2projects_2bdl_2ssm_2src_2ssm-scheduler_8c">
<area shape="rect" id="node2" href="ssm_8h.html" title="ssm.h" alt="" coords="197,109,255,136"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a212bc77e666ea29840c6201cc5d606d6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssm-scheduler_8c.html#a212bc77e666ea29840c6201cc5d606d6">SSM_EVENT_QUEUE_SIZE</a>&#160;&#160;&#160;2048</td></tr>
<tr class="separator:a212bc77e666ea29840c6201cc5d606d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25ce0218229260d51bbeb62864dc90d0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssm-scheduler_8c.html#a25ce0218229260d51bbeb62864dc90d0">SSM_ACT_QUEUE_SIZE</a>&#160;&#160;&#160;1024</td></tr>
<tr class="separator:a25ce0218229260d51bbeb62864dc90d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebf47b5a148097c1cb9d146071828637"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssm-scheduler_8c.html#aebf47b5a148097c1cb9d146071828637">SSM_QUEUE_HEAD</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:aebf47b5a148097c1cb9d146071828637"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:af9e6713f8ed5be19aea426093e1d924f"><td class="memItemLeft" align="right" valign="top">typedef uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssm-scheduler_8c.html#af9e6713f8ed5be19aea426093e1d924f">q_idx_t</a></td></tr>
<tr class="separator:af9e6713f8ed5be19aea426093e1d924f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aea3058139b852bdfa3a5603bcf945ca2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssm-scheduler_8c.html#aea3058139b852bdfa3a5603bcf945ca2">ssm_event_on</a> (struct <a class="el" href="structssm__sv.html">ssm_sv</a> *var)</td></tr>
<tr class="memdesc:aea3058139b852bdfa3a5603bcf945ca2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if there is an event on the given variable in the current instant.  <a href="#aea3058139b852bdfa3a5603bcf945ca2">More...</a><br /></td></tr>
<tr class="separator:aea3058139b852bdfa3a5603bcf945ca2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a719c32616a1b4dad8629ec6053206bf7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssm-scheduler_8c.html#a719c32616a1b4dad8629ec6053206bf7">ssm_sensitize</a> (struct <a class="el" href="structssm__sv.html">ssm_sv</a> *var, struct <a class="el" href="structssm__trigger.html">ssm_trigger</a> *trigger)</td></tr>
<tr class="memdesc:a719c32616a1b4dad8629ec6053206bf7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicate writing to a variable should trigger a routine.  <a href="#a719c32616a1b4dad8629ec6053206bf7">More...</a><br /></td></tr>
<tr class="separator:a719c32616a1b4dad8629ec6053206bf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a523db086e21c72d5fa94dba8589594"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssm-scheduler_8c.html#a4a523db086e21c72d5fa94dba8589594">ssm_desensitize</a> (struct <a class="el" href="structssm__trigger.html">ssm_trigger</a> *trigger)</td></tr>
<tr class="memdesc:a4a523db086e21c72d5fa94dba8589594"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable a sensitized routine.  <a href="#a4a523db086e21c72d5fa94dba8589594">More...</a><br /></td></tr>
<tr class="separator:a4a523db086e21c72d5fa94dba8589594"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a00f317cc133ed20a66594baf32b61e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssm-scheduler_8c.html#a9a00f317cc133ed20a66594baf32b61e">ssm_trigger</a> (struct <a class="el" href="structssm__sv.html">ssm_sv</a> *var, <a class="el" href="ssm_8h.html#af0599e969847088348147d8fb9a7bd82">ssm_priority_t</a> priority)</td></tr>
<tr class="memdesc:a9a00f317cc133ed20a66594baf32b61e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Activate routines triggered by a variable.  <a href="#a9a00f317cc133ed20a66594baf32b61e">More...</a><br /></td></tr>
<tr class="separator:a9a00f317cc133ed20a66594baf32b61e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2c6e7b59bf9ebf949e849df17b04e47"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssm-scheduler_8c.html#ad2c6e7b59bf9ebf949e849df17b04e47">ssm_activate</a> (struct <a class="el" href="structssm__act.html">ssm_act</a> *act)</td></tr>
<tr class="memdesc:ad2c6e7b59bf9ebf949e849df17b04e47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedule a routine to run in the current instant.  <a href="#ad2c6e7b59bf9ebf949e849df17b04e47">More...</a><br /></td></tr>
<tr class="separator:ad2c6e7b59bf9ebf949e849df17b04e47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34a17c0204ce4778f22532fce83236c9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ssm_8h.html#ae963c119a7847a3327202eacb31f66ca">ssm_time_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssm-scheduler_8c.html#a34a17c0204ce4778f22532fce83236c9">ssm_next_event_time</a> ()</td></tr>
<tr class="memdesc:a34a17c0204ce4778f22532fce83236c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the time of the next event in the queue or <a class="el" href="ssm_8h.html#a21ad50b0c4e1feeaeb9c78af1a9d2d9f" title="Time used to indicate something will never happen. ">SSM_NEVER</a>.  <a href="#a34a17c0204ce4778f22532fce83236c9">More...</a><br /></td></tr>
<tr class="separator:a34a17c0204ce4778f22532fce83236c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f5460d7430bcd8be02200f6111671ea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ssm_8h.html#ae963c119a7847a3327202eacb31f66ca">ssm_time_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssm-scheduler_8c.html#a1f5460d7430bcd8be02200f6111671ea">ssm_now</a> ()</td></tr>
<tr class="memdesc:a1f5460d7430bcd8be02200f6111671ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the current model time.  <a href="#a1f5460d7430bcd8be02200f6111671ea">More...</a><br /></td></tr>
<tr class="separator:a1f5460d7430bcd8be02200f6111671ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5825ea18424b1af4272e073ee0ef4673"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ssm-scheduler_8c.html#af9e6713f8ed5be19aea426093e1d924f">q_idx_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssm-scheduler_8c.html#a5825ea18424b1af4272e073ee0ef4673">find_queued_event</a> (struct <a class="el" href="structssm__sv.html">ssm_sv</a> *var)</td></tr>
<tr class="memdesc:a5825ea18424b1af4272e073ee0ef4673"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine the index of an already scheduled event.  <a href="#a5825ea18424b1af4272e073ee0ef4673">More...</a><br /></td></tr>
<tr class="separator:a5825ea18424b1af4272e073ee0ef4673"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8469ca47be4a127ba4973a6ce0f9880"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssm-scheduler_8c.html#ac8469ca47be4a127ba4973a6ce0f9880">ssm_initialize</a> (struct <a class="el" href="structssm__sv.html">ssm_sv</a> *var, void(*update)(struct <a class="el" href="structssm__sv.html">ssm_sv</a> *))</td></tr>
<tr class="memdesc:ac8469ca47be4a127ba4973a6ce0f9880"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a scheduled variable.  <a href="#ac8469ca47be4a127ba4973a6ce0f9880">More...</a><br /></td></tr>
<tr class="separator:ac8469ca47be4a127ba4973a6ce0f9880"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65a4d22d3d7bba09dc56cdcdac123ab4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssm-scheduler_8c.html#a65a4d22d3d7bba09dc56cdcdac123ab4">ssm_schedule</a> (struct <a class="el" href="structssm__sv.html">ssm_sv</a> *var, <a class="el" href="ssm_8h.html#ae963c119a7847a3327202eacb31f66ca">ssm_time_t</a> later)</td></tr>
<tr class="memdesc:a65a4d22d3d7bba09dc56cdcdac123ab4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedule a future update to a variable.  <a href="#a65a4d22d3d7bba09dc56cdcdac123ab4">More...</a><br /></td></tr>
<tr class="separator:a65a4d22d3d7bba09dc56cdcdac123ab4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a403b1a8afd439aae4c7290ac791c6745"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssm-scheduler_8c.html#a403b1a8afd439aae4c7290ac791c6745">ssm_tick</a> ()</td></tr>
<tr class="memdesc:a403b1a8afd439aae4c7290ac791c6745"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the system for the next scheduled instant.  <a href="#a403b1a8afd439aae4c7290ac791c6745">More...</a><br /></td></tr>
<tr class="separator:a403b1a8afd439aae4c7290ac791c6745"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a4538246a1ca86cdbea7e7ed184b5a2d3"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structssm__sv.html">ssm_sv</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssm-scheduler_8c.html#a4538246a1ca86cdbea7e7ed184b5a2d3">event_queue</a> [<a class="el" href="ssm-scheduler_8c.html#a212bc77e666ea29840c6201cc5d606d6">SSM_EVENT_QUEUE_SIZE</a>+<a class="el" href="ssm-scheduler_8c.html#aebf47b5a148097c1cb9d146071828637">SSM_QUEUE_HEAD</a>]</td></tr>
<tr class="memdesc:a4538246a1ca86cdbea7e7ed184b5a2d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event queue, used to track and schedule events between instants.  <a href="#a4538246a1ca86cdbea7e7ed184b5a2d3">More...</a><br /></td></tr>
<tr class="separator:a4538246a1ca86cdbea7e7ed184b5a2d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8db084282eebee9013c99e4fe8c5a2f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ssm-scheduler_8c.html#af9e6713f8ed5be19aea426093e1d924f">q_idx_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssm-scheduler_8c.html#ad8db084282eebee9013c99e4fe8c5a2f">event_queue_len</a> = 0</td></tr>
<tr class="separator:ad8db084282eebee9013c99e4fe8c5a2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85d57a8500835b6483b87aa003d4fe03"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structssm__act.html">ssm_act</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssm-scheduler_8c.html#a85d57a8500835b6483b87aa003d4fe03">act_queue</a> [<a class="el" href="ssm-scheduler_8c.html#a25ce0218229260d51bbeb62864dc90d0">SSM_ACT_QUEUE_SIZE</a>+<a class="el" href="ssm-scheduler_8c.html#aebf47b5a148097c1cb9d146071828637">SSM_QUEUE_HEAD</a>]</td></tr>
<tr class="memdesc:a85d57a8500835b6483b87aa003d4fe03"><td class="mdescLeft">&#160;</td><td class="mdescRight">ctivation record queue, used to track and schedule continuations at each instant.  <a href="#a85d57a8500835b6483b87aa003d4fe03">More...</a><br /></td></tr>
<tr class="separator:a85d57a8500835b6483b87aa003d4fe03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d38e14b4dd38b2940af345b951de879"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ssm-scheduler_8c.html#af9e6713f8ed5be19aea426093e1d924f">q_idx_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssm-scheduler_8c.html#a9d38e14b4dd38b2940af345b951de879">act_queue_len</a> = 0</td></tr>
<tr class="separator:a9d38e14b4dd38b2940af345b951de879"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af981ea26ee438c8abea350cba007fffb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ssm_8h.html#ae963c119a7847a3327202eacb31f66ca">ssm_time_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssm-scheduler_8c.html#af981ea26ee438c8abea350cba007fffb">now</a> = 0L</td></tr>
<tr class="separator:af981ea26ee438c8abea350cba007fffb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a25ce0218229260d51bbeb62864dc90d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25ce0218229260d51bbeb62864dc90d0">&#9670;&nbsp;</a></span>SSM_ACT_QUEUE_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SSM_ACT_QUEUE_SIZE&#160;&#160;&#160;1024</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Size of the activation record queue; override as necessary </p>

</div>
</div>
<a id="a212bc77e666ea29840c6201cc5d606d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a212bc77e666ea29840c6201cc5d606d6">&#9670;&nbsp;</a></span>SSM_EVENT_QUEUE_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SSM_EVENT_QUEUE_SIZE&#160;&#160;&#160;2048</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Size of the event queue; override as necessary </p>

</div>
</div>
<a id="aebf47b5a148097c1cb9d146071828637"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebf47b5a148097c1cb9d146071828637">&#9670;&nbsp;</a></span>SSM_QUEUE_HEAD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SSM_QUEUE_HEAD&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Extra entries at the start of a binary heap </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="af9e6713f8ed5be19aea426093e1d924f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9e6713f8ed5be19aea426093e1d924f">&#9670;&nbsp;</a></span>q_idx_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint16_t <a class="el" href="ssm-scheduler_8c.html#af9e6713f8ed5be19aea426093e1d924f">q_idx_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Queue index type; these are 1-indexed </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a5825ea18424b1af4272e073ee0ef4673"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5825ea18424b1af4272e073ee0ef4673">&#9670;&nbsp;</a></span>find_queued_event()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="ssm-scheduler_8c.html#af9e6713f8ed5be19aea426093e1d924f">q_idx_t</a> find_queued_event </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structssm__sv.html">ssm_sv</a> *&#160;</td>
          <td class="paramname"><em>var</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine the index of an already scheduled event. </p>
<p>This is an inefficient linear search, so it's not meant to be used often. This is in preparation for either removing or rescheduling an event in the queue. The function should only be called on a variable that is in the queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>must be non-NULL </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad2c6e7b59bf9ebf949e849df17b04e47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2c6e7b59bf9ebf949e849df17b04e47">&#9670;&nbsp;</a></span>ssm_activate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ssm_activate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structssm__act.html">ssm_act</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Schedule a routine to run in the current instant. </p>
<p>Enter the given activation record into the queue of activation records. This is idempotent: it may be called multiple times on the same activation record within an instant; only the first call has any effect.</p>
<p>Invokes <a class="el" href="ssm_8h.html#a0489a05572c0c675fd7eeee65e8b40e3" title="Invoked when limited resources are exhausted, e.g., unable to allocate memory, no more queue space...">SSM_RESOURCES_EXHAUSTED</a>("ssm_activate") if the activation record queue is full. </p>

</div>
</div>
<a id="a4a523db086e21c72d5fa94dba8589594"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a523db086e21c72d5fa94dba8589594">&#9670;&nbsp;</a></span>ssm_desensitize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ssm_desensitize </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structssm__trigger.html">ssm_trigger</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable a sensitized routine. </p>
<p>Remove the trigger from its variable. Only call this on a previously-sensitized trigger. </p>

</div>
</div>
<a id="aea3058139b852bdfa3a5603bcf945ca2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea3058139b852bdfa3a5603bcf945ca2">&#9670;&nbsp;</a></span>ssm_event_on()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ssm_event_on </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structssm__sv.html">ssm_sv</a> *&#160;</td>
          <td class="paramname"><em>var</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return true if there is an event on the given variable in the current instant. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>Variable: must be non-NULL </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac8469ca47be4a127ba4973a6ce0f9880"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8469ca47be4a127ba4973a6ce0f9880">&#9670;&nbsp;</a></span>ssm_initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ssm_initialize </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structssm__sv.html">ssm_sv</a> *&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(struct <a class="el" href="structssm__sv.html">ssm_sv</a> *)&#160;</td>
          <td class="paramname"><em>update</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a scheduled variable. </p>
<p>Call this to initialize the contents of a newly allocated scheduled variable, e.g., after <a class="el" href="ssm_8h.html#a589490d796524f348e597db6e9e0a204" title="Enter a routine. ">ssm_enter()</a> </p>

</div>
</div>
<a id="a34a17c0204ce4778f22532fce83236c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34a17c0204ce4778f22532fce83236c9">&#9670;&nbsp;</a></span>ssm_next_event_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ssm_8h.html#ae963c119a7847a3327202eacb31f66ca">ssm_time_t</a> ssm_next_event_time </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the time of the next event in the queue or <a class="el" href="ssm_8h.html#a21ad50b0c4e1feeaeb9c78af1a9d2d9f" title="Time used to indicate something will never happen. ">SSM_NEVER</a>. </p>
<p>Typically used by the platform code that ultimately invokes <a class="el" href="ssm_8h.html#a403b1a8afd439aae4c7290ac791c6745" title="Run the system for the next scheduled instant. ">ssm_tick()</a>. </p>

</div>
</div>
<a id="a1f5460d7430bcd8be02200f6111671ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f5460d7430bcd8be02200f6111671ea">&#9670;&nbsp;</a></span>ssm_now()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ssm_8h.html#ae963c119a7847a3327202eacb31f66ca">ssm_time_t</a> ssm_now </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the current model time. </p>

</div>
</div>
<a id="a65a4d22d3d7bba09dc56cdcdac123ab4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65a4d22d3d7bba09dc56cdcdac123ab4">&#9670;&nbsp;</a></span>ssm_schedule()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ssm_schedule </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structssm__sv.html">ssm_sv</a> *&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ssm_8h.html#ae963c119a7847a3327202eacb31f66ca">ssm_time_t</a>&#160;</td>
          <td class="paramname"><em>later</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Schedule a future update to a variable. </p>
<p>Add an event to the global event queue for the given variable, replacing any pending event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>Variable to schedule: non-NULL </td></tr>
    <tr><td class="paramname">later</td><td>Event time; must be in the future (greater than <a class="el" href="ssm-scheduler_8c.html#af981ea26ee438c8abea350cba007fffb">now</a>) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a719c32616a1b4dad8629ec6053206bf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a719c32616a1b4dad8629ec6053206bf7">&#9670;&nbsp;</a></span>ssm_sensitize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ssm_sensitize </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structssm__sv.html">ssm_sv</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structssm__trigger.html">ssm_trigger</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicate writing to a variable should trigger a routine. </p>
<p>Add a trigger to a variable's list of triggers. When the scheduled variable is written, the scheduler will run the trigger's routine routine </p>

</div>
</div>
<a id="a403b1a8afd439aae4c7290ac791c6745"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a403b1a8afd439aae4c7290ac791c6745">&#9670;&nbsp;</a></span>ssm_tick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ssm_tick </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run the system for the next scheduled instant. </p>
<p>Typically run by the platform code, not the SSM program per se.</p>
<p>Advance <a class="el" href="ssm-scheduler_8c.html#af981ea26ee438c8abea350cba007fffb">now</a> to the time of the earliest event in the queue, if any.</p>
<p>Remove every event at the head of the event queue scheduled for <a class="el" href="ssm-scheduler_8c.html#af981ea26ee438c8abea350cba007fffb">now</a>, update the variable's current value by calling its (type-specific) update function, and schedule all the triggers in the activation queue.</p>
<p>Remove the activation record in the activation record queue with the lowest priority number and execute its "step" function. </p>

</div>
</div>
<a id="a9a00f317cc133ed20a66594baf32b61e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a00f317cc133ed20a66594baf32b61e">&#9670;&nbsp;</a></span>ssm_trigger()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="structssm__trigger.html">ssm_trigger</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structssm__sv.html">ssm_sv</a> *&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ssm_8h.html#af0599e969847088348147d8fb9a7bd82">ssm_priority_t</a>&#160;</td>
          <td class="paramname"><em>priority</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Activate routines triggered by a variable. </p>
<p>Call this when a scheduled variable is assigned in the current instant (i.e., not scheduled)</p>
<p>The given priority should be that of the routine doing the update. Instantaneous assignment can only activate lower-priority (i.e., later) routines in the same instant. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>Variable being assigned </td></tr>
    <tr><td class="paramname">priority</td><td>Priority of the routine doing the assignment. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a85d57a8500835b6483b87aa003d4fe03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85d57a8500835b6483b87aa003d4fe03">&#9670;&nbsp;</a></span>act_queue</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structssm__act.html">ssm_act</a>* act_queue[<a class="el" href="ssm-scheduler_8c.html#a25ce0218229260d51bbeb62864dc90d0">SSM_ACT_QUEUE_SIZE</a>+<a class="el" href="ssm-scheduler_8c.html#aebf47b5a148097c1cb9d146071828637">SSM_QUEUE_HEAD</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>ctivation record queue, used to track and schedule continuations at each instant. </p>
<p>Managed as a binary heap sorted by a-&gt;priority </p>

</div>
</div>
<a id="a9d38e14b4dd38b2940af345b951de879"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d38e14b4dd38b2940af345b951de879">&#9670;&nbsp;</a></span>act_queue_len</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ssm-scheduler_8c.html#af9e6713f8ed5be19aea426093e1d924f">q_idx_t</a> act_queue_len = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a4538246a1ca86cdbea7e7ed184b5a2d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4538246a1ca86cdbea7e7ed184b5a2d3">&#9670;&nbsp;</a></span>event_queue</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structssm__sv.html">ssm_sv</a>* event_queue[<a class="el" href="ssm-scheduler_8c.html#a212bc77e666ea29840c6201cc5d606d6">SSM_EVENT_QUEUE_SIZE</a>+<a class="el" href="ssm-scheduler_8c.html#aebf47b5a148097c1cb9d146071828637">SSM_QUEUE_HEAD</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Event queue, used to track and schedule events between instants. </p>
<p>Managed as a binary heap sorted by e-&gt;later_time</p>
<p>Since the first element (QUEUE_HEAD) is unusued, event_queue[event_queue_len] is the last element in the queue provided event_queue_len is non-zero </p>

</div>
</div>
<a id="ad8db084282eebee9013c99e4fe8c5a2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8db084282eebee9013c99e4fe8c5a2f">&#9670;&nbsp;</a></span>event_queue_len</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ssm-scheduler_8c.html#af9e6713f8ed5be19aea426093e1d924f">q_idx_t</a> event_queue_len = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af981ea26ee438c8abea350cba007fffb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af981ea26ee438c8abea350cba007fffb">&#9670;&nbsp;</a></span>now</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ssm_8h.html#ae963c119a7847a3327202eacb31f66ca">ssm_time_t</a> now = 0L</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Note that this starts out uninitialized. It is the responsibility of the runtime to do so. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
